// Clinical Genomics Toybox - Nextflow Configuration

// Default parameters
params {
    reads = "$baseDir/data/*_{1,2}.fastq.gz"
    reference = "$baseDir/data/reference/hg38.fa"
    outdir = "results"
    threads = 8
}

// Process configuration
process {
    // Default resource requirements
    cpus = 1
    memory = 2.GB
    time = 1.h
    
    // Error handling
    errorStrategy = 'terminate'
    maxRetries = 3
    
    // Publish directory mode
    publishDir = [
        path: { "${params.outdir}/${task.process.tokenize(':')[-1].toLowerCase()}" },
        mode: 'copy',
        enabled: true
    ]
}

// Executor configuration
executor {
    name = 'local'
    cpus = 8
    memory = 16.GB
}

// Docker configuration
docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'
}

// Conda configuration
conda {
    enabled = true
    cacheDir = "$baseDir/env/.conda"
}

// Manifest
manifest {
    name = 'clinical-genomics-toybox'
    author = 'Clinical Genomics Team'
    description = 'A reproducible playground covering every major clinical-genomics data format and workflow'
    version = '1.0.0'
    nextflowVersion = '>=21.10.3'
}
